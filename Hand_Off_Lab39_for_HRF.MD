
# From Lab 39 to HRF Brief Documentation of Remaining Issues

## Highlight Feature Yet to Implement:

1.	A display on the Front End for all content provided by the /approval_reconciliation/ end point, which is currently a functional end-point unconnected to the front end. The corresponding function in the DS codebase is most likely the *to_approve* function in main.py. 
<br>

### Impact Assessment: 
> If the feature works as expected, the new feature may ameliorate issue number one to a great extent. 
</br>
</br>
</br>

## Where Are the Potentially Useful Codes?
> Please check archive.py.
</br>
</br>
</br>

## Issues with the Current Version of the Codebase:
1. ### Multiple tweets entries in the database may have the same incident ID
> The current codebase may allow the option to send the tweet with the form so that many may provide the missing information regarding the incident. This means that we may have multiple input for the same incident ID, which would in turn be presented to the admin via the dashboard as stand-alone entries.

#### Ideal Goals: 
> a.	One entry per incident ID presented to the admin. dashboard. A
> b.  Another feature yet to be built would display all related tweets. 

#### Possible Solution: 
> a.	Look at #1 of ***Highlight Feature Yet to Implement***, as presented in (b) of the ***Ideal Goals*** under this section. 
> b.	Alter the approve function accordingly after adjusting the Backend or DS code.
</br>
</br>

2. ### The reply must be by clicking the meta-data button in the DM (direct message), the app cannot process text information
> Currently, our DM message does not specify to reply ***only*** by clicking the meta-data button generated by Twitter. 

##### Possible Solutions Include: 
> a. Change the message in the codebase (twitter.py); and/or  
> b. Modify the process_dms function in twitter.py, which needs additional command to check none-metadata input. The goal should be that if there is no metadata, the app would send another message to remind the user to use the metadata button. 
</br>
</br>

3. ### Twitter Bot may need a name change and/or a new account, and a new welcome message function. 
#### Twitter Bot Name:
> Twitter bot has an environmental variable as its name currently not used in the code; it was intended to be the name during a real conversation. However, we never reach that stage. 
##### Possible Solutions Include: 
> a. Change the environmental variable when it is necessary. 

#### New Twitter Account and Welcome Function: 
> Currently, Lambda Schoolâ€™s lab twitter account may be opened by a student as an individual account. Should HRF not want to continue with the current account, HRF may need to consider opening a business/enterprise account on twitter. 
##### Possible Solutions Include: 
> a. In conjunction with the new account, HRF may have to use its new credential to create new environmental variables to activate the welcome message function in twitter.py. The function would return a welcome message id and place that id, which is tied to the account, in bot.py, as it is in the codebase. 
</br>
</br>

4. ### HRF will need to determine the frequency of database to check conversation status in the conversations table
> The advance_all end point would refresh the etnry of the status of each conversation in the conversations table. As is, advance_all call is not automated, because @app.on_event("startup") command was never placed above line 177 in main.py. 
##### Possible Solutions Include:
> @app.on_event("startup") needs to be added one line above the top of the advance_all function; namely, above the current line 177 in main.py. 
</br>
</br>
</br>

## Input for Testing the API to Send Forms Out
### Input
End point form-out would send the forms out. **Form 0 sends a form in a tweet, from 1 sends a direct message request in a tweet**. Below is an example of input for the form-out end-point input

{
  "form": 1,
  "incident_id": 0000 (number of your choice),
  "link": "https://twitter.com/(twitter user name)/status/(the id of the very tweet: 0000000000000000000)",
  "tweet_id": "(the id of the very tweet: 0000000000000000000 in one string)",
  "user_name": "(twitter user name in one string)"
}

### Other Details for Local Testing 
#### In HRF Twitter Account
Currently we do not automate the deletion of the twitter conversations in tweet and DM. This may cause twitter errors because twitter does not allow the same message to send twice. To test locally, please delete all tweets and leave all conversations.
#### In the AWS Databse, Conversations (conversations) Table
Please delete all previous test entries under the same incident_id.  
 
